# Flash é•œåƒæ„å»ºç³»ç»Ÿ

æ­¤æ„å»ºç³»ç»Ÿç”¨äºåˆ›å»ºåŒ…å«å®Œæ•´åˆ†åŒºç»“æ„çš„ Flash åˆ·æœºåŒ…ï¼Œç‰¹åˆ«ä¸º `efused-wxy-oec` ç­‰éœ€è¦ä¿ç•™åŸå‚åˆ†åŒºçš„è®¾å¤‡è®¾è®¡ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³• 1: ä½¿ç”¨ GitHub Actionsï¼ˆæ¨èï¼‰

1. è¿›å…¥ä»“åº“çš„ **Actions** é¡µé¢
2. é€‰æ‹© **"Build Flash Images"** workflow
3. ç‚¹å‡» **"Run workflow"** æŒ‰é’®
4. é…ç½®å‚æ•°åå¼€å§‹æ„å»º
5. æ„å»ºå®Œæˆåï¼ŒFlash é•œåƒä¼šè‡ªåŠ¨å‘å¸ƒåˆ° `Armbian_debian` release

### æ–¹æ³• 2: æœ¬åœ°å¿«é€Ÿæ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/dd-ray/amlogic-s9xxx-armbian.git
cd amlogic-s9xxx-armbian

# è¿è¡Œå¿«é€Ÿæ„å»ºè„šæœ¬ï¼ˆéœ€è¦ sudo æƒé™ï¼‰
sudo ./build-latest-flash.sh efused-wxy-oec
```

### æ–¹æ³• 3: æ‰‹åŠ¨æ„å»º

```bash
# ä¸‹è½½æºé•œåƒ
wget https://github.com/dd-ray/amlogic-s9xxx-armbian/releases/download/Armbian_bookworm_save_2025.06/Armbian_25.08.0_rockchip_efused-wxy-oec_bookworm_6.12.33_server_2025.06.15.img.gz

# æ„å»º Flash é•œåƒ
sudo bash build-armbian/create-flash-image.sh \
  "Armbian_25.08.0_rockchip_efused-wxy-oec_bookworm_6.12.33_server_2025.06.15.img.gz" \
  "efused-wxy-oec" \
  "./output"
```

## ğŸ“‹ åˆ†åŒºç»“æ„

Flash é•œåƒåŒ…å« 7 ä¸ªåˆ†åŒºçš„å®Œæ•´ç»“æ„ï¼Œä¸¥æ ¼æŒ‰ç…§åŸå‚åˆ†åŒºå¸ƒå±€ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Flash é•œåƒåˆ†åŒºå¸ƒå±€                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆ†åŒºå·   â”‚ åˆ†åŒºå       â”‚ å¤§å°     â”‚ æè¿°                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1       â”‚ uboot       â”‚ 4MB     â”‚ U-Boot åˆ†åŒº (åŸå‚)                      â”‚
â”‚ 2       â”‚ misc        â”‚ 4MB     â”‚ æ‚é¡¹åˆ†åŒº (åŸå‚)                         â”‚
â”‚ 3       â”‚ boot        â”‚ 64MB    â”‚ å¯åŠ¨åˆ†åŒº (åŸå‚)                         â”‚
â”‚ 4       â”‚ kernel      â”‚ 64MB    â”‚ å†…æ ¸åˆ†åŒº (åŸå‚)                         â”‚
â”‚ 5       â”‚ env         â”‚ 32MB    â”‚ ç¯å¢ƒå˜é‡åˆ†åŒº (åŸå‚)                      â”‚
â”‚ 6       â”‚ boot        â”‚ 512MB   â”‚ Armbian å¯åŠ¨åˆ†åŒº (ä»æºé•œåƒå¤åˆ¶)          â”‚
â”‚ 7       â”‚ rootfs      â”‚ å‰©ä½™ç©ºé—´ â”‚ Armbian æ ¹æ–‡ä»¶ç³»ç»Ÿ (ä»æºé•œåƒå¤åˆ¶)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ” UUID ä¿æŠ¤æœºåˆ¶**
- ç£ç›˜ GUID: `9F6F0000-0000-4505-8000-6666000042BD`
- æ‰€æœ‰åˆ†åŒº PARTUUID å’Œæ–‡ä»¶ç³»ç»Ÿ UUID ä¸åŸå‚ä¿æŒå®Œå…¨ä¸€è‡´
- ç¡®ä¿ç³»ç»Ÿæ­£å¸¸è¯†åˆ«å’Œå¯åŠ¨

**ğŸ§  æ™ºèƒ½é•œåƒé€‰æ‹©**
- è‡ªåŠ¨æ‰«æ release ä¸­çš„æ‰€æœ‰åŒ¹é…é•œåƒæ–‡ä»¶
- è§£ææ–‡ä»¶åä¸­çš„æ—¥æœŸä¿¡æ¯ï¼ˆå¦‚ `2025.06.15`ï¼‰
- è‡ªåŠ¨é€‰æ‹©æ—¥æœŸæœ€æ–°çš„ç‰ˆæœ¬è¿›è¡Œæ„å»º
- ç¡®ä¿æ€»æ˜¯ä½¿ç”¨æœ€æ–°çš„ Armbian é•œåƒ

## ğŸ› ï¸ æ„å»ºç»„ä»¶

### 1. æ ¸å¿ƒè„šæœ¬

- **`build-armbian/create-flash-image.sh`**: æ ¸å¿ƒæ„å»ºè„šæœ¬ï¼Œè´Ÿè´£åˆ›å»ºåŒ…å«7ä¸ªåˆ†åŒºçš„Flashé•œåƒ
- **`build-latest-flash.sh`**: å¿«é€Ÿæ„å»ºè„šæœ¬ï¼Œè‡ªåŠ¨ä¸‹è½½æœ€æ–°é•œåƒå¹¶æ„å»º

### 2. GitHub Actions

- **`.github/workflows/build-flash-images.yml`**: è‡ªåŠ¨åŒ–æ„å»ºå·¥ä½œæµï¼Œæ”¯æŒï¼š
  - æ™ºèƒ½é€‰æ‹©æœ€æ–°æ—¥æœŸçš„æºé•œåƒ
  - è‡ªåŠ¨ä¸‹è½½å’Œæ„å»ºFlashé•œåƒ
  - ä¸Šä¼ åˆ°æŒ‡å®šrelease
  - ç”ŸæˆSHA256æ ¡éªŒæ–‡ä»¶

### 3. æ–‡æ¡£

- **`documents/flash_image_build_guide.md`**: è¯¦ç»†çš„æ„å»ºå’Œä½¿ç”¨æŒ‡å—
- **`README-Flash-Build.md`**: æœ¬æ–‡ä»¶ï¼Œç³»ç»Ÿæ¦‚è¿°

## ğŸ“¦ è¾“å‡ºæ–‡ä»¶

æ„å»ºå®Œæˆåä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

```
Flash_Armbian_25.08.0_rockchip_efused-wxy-oec_bookworm_6.12.33_server_2025.06.15.img.zip
Flash_Armbian_25.08.0_rockchip_efused-wxy-oec_bookworm_6.12.33_server_2025.06.15.img.zip.sha256
```

## ğŸ”§ ä½¿ç”¨ Flash é•œåƒ

1. **ä¸‹è½½**: ä» [Armbian_debian release](https://github.com/dd-ray/amlogic-s9xxx-armbian/releases/tag/Armbian_debian) ä¸‹è½½
2. **éªŒè¯**: `sha256sum -c Flash_*.img.zip.sha256`
3. **è§£å‹**: `unzip Flash_*.img.zip`
4. **åˆ·å†™**: ä½¿ç”¨ `rkdevtool` å†™å…¥åˆ°è®¾å¤‡ Flash å­˜å‚¨

## âš ï¸ é‡è¦æé†’

- **å¤‡ä»½æ•°æ®**: åˆ·å†™å‰åŠ¡å¿…å¤‡ä»½é‡è¦æ•°æ®
- **ç¡®è®¤è®¾å¤‡**: ç¡®ä¿é•œåƒé€‚ç”¨äºæ‚¨çš„è®¾å¤‡å‹å·
- **æ–­ç”µé£é™©**: åˆ·å†™è¿‡ç¨‹ä¸­ä¸è¦æ–­ç”µ
- **åŸå‚åˆ†åŒº**: Flashé•œåƒä¼šè¦†ç›–æ‰€æœ‰åˆ†åŒºï¼ŒåŒ…æ‹¬åŸå‚åˆ†åŒº

## ğŸ” æŠ€æœ¯åŸç†

1. **åˆ†åŒºåˆ›å»º**: ä½¿ç”¨ `sgdisk` åˆ›å»º GPT åˆ†åŒºè¡¨
2. **æ•°æ®å¤åˆ¶**: é€šè¿‡å¾ªç¯è®¾å¤‡æŒ‚è½½è¿›è¡Œæ–‡ä»¶ç³»ç»Ÿçº§å¤åˆ¶
3. **å®Œæ•´æ€§ä¿è¯**: 
   - æ”¯æŒå¤šç§å‹ç¼©æ ¼å¼ (.gz, .xz, .zip)
   - è‡ªåŠ¨æ ¡éªŒå’Œæ¸…ç†
   - é”™è¯¯å¤„ç†å’Œå›æ»š

## ğŸ¤ æ”¯æŒçš„è®¾å¤‡

ç›®å‰æ”¯æŒï¼š
- **efused-wxy-oec**: å®Œå…¨æ”¯æŒ
- **å…¶ä»–è®¾å¤‡**: è®¡åˆ’ä¸­

## ğŸ“Š æ„å»ºæµç¨‹

```mermaid
graph TD
    A[å¼€å§‹æ„å»º] --> B[æ‰«ææ‰€æœ‰é•œåƒæ–‡ä»¶]
    B --> C[è§£ææ–‡ä»¶åæ—¥æœŸ]
    C --> D[é€‰æ‹©æœ€æ–°æ—¥æœŸé•œåƒ]
    D --> E[ä¸‹è½½é€‰ä¸­çš„é•œåƒ]
    E --> F[ä¸‹è½½åŸå‚åˆ†åŒºè¡¨]
    F --> G[è§£å‹é•œåƒæ–‡ä»¶]
    G --> H[åˆ›å»ºFlashé•œåƒæ–‡ä»¶]
    H --> I[å¤åˆ¶åŸå‚åˆ†åŒºè¡¨]
    I --> J[æ‰©å±•åˆ†åŒº7]
    J --> K[è®¾ç½®PARTUUID]
    K --> L[æ ¼å¼åŒ–åˆ†åŒº6/7]
    L --> M[è®¾ç½®æ–‡ä»¶ç³»ç»ŸUUID]
    M --> N[æŒ‚è½½æºé•œåƒ]
    N --> O[å¤åˆ¶bootåˆ†åŒº]
    O --> P[å¤åˆ¶rootfsåˆ†åŒº]
    P --> Q[å¸è½½åˆ†åŒº]
    Q --> R[å‹ç¼©é•œåƒ]
    R --> S[ç”Ÿæˆæ ¡éªŒæ–‡ä»¶]
    S --> T[æ„å»ºå®Œæˆ]
```

## ğŸ› æ•…éšœæ’é™¤

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| æ„å»ºå¤±è´¥ | æºé•œåƒæŸå | é‡æ–°ä¸‹è½½æºé•œåƒ |
| æƒé™é”™è¯¯ | érootç”¨æˆ· | ä½¿ç”¨ `sudo` è¿è¡Œ |
| ç©ºé—´ä¸è¶³ | ç£ç›˜ç©ºé—´ä¸å¤Ÿ | æ¸…ç†ç£ç›˜ç©ºé—´ |
| åˆ†åŒºé”™è¯¯ | è®¾å¤‡å ç”¨ | å¸è½½ç›¸å…³è®¾å¤‡ |

## ğŸ“ˆ ç‰ˆæœ¬å†å²

- **v1.0**: åˆå§‹ç‰ˆæœ¬ï¼Œæ”¯æŒ efused-wxy-oec
- **v1.1**: æ·»åŠ è‡ªåŠ¨åŒ–æ„å»º
- **v1.2**: ä¼˜åŒ–é”™è¯¯å¤„ç†å’Œæ–‡æ¡£

## ğŸ¯ è·¯çº¿å›¾

- [ ] æ”¯æŒæ›´å¤šè®¾å¤‡ç±»å‹
- [ ] å¢é‡æ›´æ–°æ”¯æŒ
- [ ] å¯è§†åŒ–æ„å»ºç•Œé¢
- [ ] è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶

## ğŸ“ è·å–å¸®åŠ©

- **é—®é¢˜æŠ¥å‘Š**: [GitHub Issues](https://github.com/dd-ray/amlogic-s9xxx-armbian/issues)
- **åŠŸèƒ½è¯·æ±‚**: [GitHub Discussions](https://github.com/dd-ray/amlogic-s9xxx-armbian/discussions)
- **æ–‡æ¡£**: [documents/flash_image_build_guide.md](documents/flash_image_build_guide.md)

---

**âš¡ æç¤º**: ä½¿ç”¨ GitHub Actions æ˜¯æœ€ä¾¿æ·çš„æ„å»ºæ–¹å¼ï¼ 